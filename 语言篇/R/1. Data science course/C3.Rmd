---
output: word_document
---
# Week 2????????
## 1.????web????  

1. readLines
```{r}
con = url("http://scholar.google.com/citations?user=HI-I6C0AAAAJ&hl=en")
htmlCode = readLines(con)
close(con)
```
2. XML package
```{r}
library(XML)
url <- "http://scholar.google.com/citations?user=HI-I6C0AAAAJ&hl=en"
html <- htmlTreeParse(url, useInternalNodes=T)
xpathSApply(html, "//title", xmlValue)
xpathSApply(html, "//td[@id='col-citedby']", xmlValue)
```

3. httr package  
httr?????????????¦Ì?????????????XML????????????
```{r}
library(httr)
html2 = GET(url)
content2 = content(html2,as="text")
parsedHtml = htmlParse(content2,asText=TRUE)
xpathSApply(parsedHtml, "//title", xmlValue)
```
4. ????????????????????
```{r}
library(httr)
pg1 = GET("http://httpbin.org/basic-auth/user/passwd")
pg1
pg2<-GET("http://httpbin.org/basic-auth/user/passwd",authenticate("user", "passwd"))
pg2
str(pg2)
```
????handles  
```{r}
google = handle("http://google.com")
pg1 = GET(handle=google,path="/")
pg2 = GET(handle=google,path="search")
```

## 2.API  
??????Github??????????????**???¦Ë???????**
```{r}
install.packages("httpuv")
library(httpuv)


library(httr)
# 1. Find OAuth settings for github:
#    http://developer.github.com/v3/oauth/
oauth_endpoints("github")

# 2. Register an application at https://github.com/settings/applications
#    Insert your values below - if secret is omitted, it will look it up in
#    the GITHUB_CONSUMER_SECRET environmental variable.
#
#    Use http://localhost:1410 as the callback url
myapp <- oauth_app("APIzzz", "1d82cc48dae9ebff3e36")

# 3. Get OAuth credentials
github_token <- oauth2.0_token(oauth_endpoints("github"), myapp)

# 4. Use API
gtoken <- config(token = github_token)
req <- GET("https://api.github.com/rate_limit", gtoken)
stop_for_status(req)
content(req)

# OR:
req <- with_config(gtoken, GET("https://api.github.com/rate_limit"))
stop_for_status(req)
content(req)
```

##3. ????  
sqldf package??????R?§Ö?data frame????SQL??????????
```{r}
install.packages("sqldf")
library(sqldf)
setwd("C:\\Users\\Administrator\\Desktop\\Data science\\3.Geting and cleaning data\\Hw\\w2")
acs<-read.csv(file="getdata-data-ss06pid.csv")
ddd<-sqldf("select pwgtp1 from acs where AGEP < 50")
head(ddd)
```



# week 3????????
## 1. subset and sort  
sort
    
    sort(x,decreasing=,na.last=)

order  
    #????x???????§Ü???????????
    x[order(x[,1],x[,3]),]
????plyr???§Ö?arrange????????????

    library(plyr)
    arrange(x,var1)

## 2. summarize data
????????????????????????????????????,??§»?????????? 

    head(data,n=)
    tail(data)
    summary(data) quantile()
    str(data)
    table() #????§»??????
    sum(is.na()) #??????????????
    xtabs()  #??????????
    ftable()

## 3. ?????¦Ì?????????
????????????????
    
    y<-ifelse(x<0,TRUE,FALSE)
????????????????

    groups=cut(data,breaks=)
????????cut????
library(Hmisc)
Hmisc??

factor????????

    factor()

    yesno<-sample(c("yes","no"),size=10,replace=T)
    yesnofac<-factor(yesno,levels=c("yes","no"))
    relevel(yesnofac,ref="yes")

## 4.reshape
    library(reshape2)
    head(mtcars)

    mtcars$carname<-rownames(mtcars)
    carmelt<-melt(mtcars,id=c("carname","gear","cyl"),measure.vars=c("mpg","hp"))
    ????mpg??hp?§Ò???1??
    head(carmelt)
    cyldata<-dcast(carmelt,cyl~variable,mean)

## 5.merge data
F1:
merge(x,y,by,by.x,by.y,all)  
??????????????????
intersect(names(dat1),names(dat2))  
F2:
plyr????join????????????????????????


# week4 ????????

## 1.text variables
- tolower(),toupper() ??§³§Õ????
???????????????????¦Ì?????

- strsplit()  
???????????????????????????????????????§Ù?????????????list
- gsub()
- grep(),grepl()
- package stringr
- str_trim()???????? 

??????????????????????
1. ????????????§³§Õ
2. ???¨°????§Ö?????????????
3. ??????????????????

## 2.??????????
```{r}
dat<-readLines("dat.txt")
dat
```
- ^????????
- $??????¦Â
 ```{r}
    grep("^i",dat)
    grep("!$",dat)
```

- [0-9][a-zA-Z]
- . ????????????
- | ????or   good|well|better 

        ^[Gg]ood|[Bb]ad   ??good??????????????bad
        ^([Gg]ood|[Bb]ad)  ??good????bad????

- ()?  ????????????????????????????
- *????????????+????????????
- {}????????????????§³??????????


- \1  \2  
look for repetition of a particular phrase.
 +([a-zA-Z]+) +\1 + ??????????  
  so so
  blah blash

## 3.??????????
1. ????????????????  
date()
??????????????????
d= Sys.Date()
 ??????????Date??????????????

2. ????????
%d ??0-31
%a %A  ??????
%m  ?¡¤?
%Y %y   ??

3. as.Date()
weekdays()
months()

4. ??????????????????????????????????????  
????????
```{r}
library(lubridate)
ymd("20140723")
dmy("03-4-1999")
```
????????  
ymd_hms()
wday()

## 4. data resources
????ppt????????????????????????????????????????

































